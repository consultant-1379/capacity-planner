<section>
  <div class="page-header">
    <h1>Project Backlog</h1>
  </div>
  <div>There are {{ vm.backlogprojects.length }} project backlog items</div>
  <br />
  <a ui-sref="backlogprojects.create" class="btn btn-sm btn-success">Create new project backlog item</a>
  <table ng-if="vm.backlogprojects.length > 0" class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>In Plan(s):</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr ui-sref="backlogprojects.view({backlogprojectId: backlogproject._id})" ng-repeat="backlogproject in vm.backlogprojects" style="cursor: pointer">
        <td>{{ backlogproject.name }}</td>
        <td ng-if="vm.associatedPlans.length">
          <span ng-repeat="plan in vm.associatedPlans">
            <span ng-if="plan.backlogprojectId === backlogproject._id">
            {{ plan.name }}&nbsp;
            </span>
          </span>
        </td>
        <td ng-if="!vm.associatedPlans.length">None</td>
        <td stop-propagation>
          <a class="btn btn-sm btn-primary" ui-sref="backlogprojects.edit({backlogprojectId: backlogproject._id})">Edit</a>
          <a class="btn btn-sm btn-danger" ng-click="vm.remove(backlogproject)">Delete</a>
        </td>
      </tr>
    </tbody>
  </table>
</section>
